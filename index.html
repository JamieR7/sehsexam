<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IB SEHS Exam Practice</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Gotham', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #004587;
            min-height: 100vh;
            padding: 20px;
            padding-bottom: 70px; /* Space for sticky bar */
        }
        .container { max-width: 1000px; margin: 0 auto; }
        .header { text-align: center; color: white; margin-bottom: 30px; }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
        .header p { font-size: 1.1em; opacity: 0.95; }
        .ai-disclaimer {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            color: #856404;
            font-size: 14px;
            line-height: 1.6;
        }
        .ai-disclaimer strong { display: block; margin-bottom: 5px; font-size: 15px; }
        .controls {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .level-toggle { display: flex; gap: 10px; margin-bottom: 20px; justify-content: center; }
        .level-btn {
            padding: 10px 30px;
            border: 2px solid #F2B406;
            background: white;
            color: #F2B406;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
        }
        .level-btn.active { background: #F2B406; color: white; }
        .level-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3); }
        .filter-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 20px; }
        @media (max-width: 768px) { .filter-grid { grid-template-columns: 1fr; } }
        .filter-section label { display: block; font-weight: 600; margin-bottom: 8px; color: #333; font-size: 14px; }
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s;
        }
        select:hover { border-color: #F2B406; }
        select:focus { outline: none; border-color: #F2B406; }
        .question-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            padding-top: 15px;
            border-top: 2px solid #e0e0e0;
        }
        .nav-btn {
            padding: 10px 20px;
            background: #F2B406;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: background 0.3s;
        }
        .nav-btn:hover:not(:disabled) { background: #E82F37; }
        .nav-btn:disabled { background: #ccc; cursor: not-allowed; }
        .random-btn {
            padding: 10px 20px;
            background: #10b981;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: background 0.3s;
        }
        .random-btn:hover { background: #059669; }
        .question-counter { font-weight: 600; color: #333; font-size: 14px; }
        .card {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .level-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 700;
            margin-right: 8px;
            letter-spacing: 0.5px;
        }
        .badge-SL { background: #10b981; color: white; }
        .badge-HL { background: #f59e0b; color: white; }
        .subtopic-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 15px;
            background: #e0e7ff;
            color: #3730a3;
        }
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .marks-badge {
            background: #F2B406;
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
        }
        .question-text { font-size: 18px; line-height: 1.6; color: #1a1a1a; margin-bottom: 25px; }
        textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s;
        }
        textarea:focus { outline: none; border-color: #F2B406; }
        .submit-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #F2B406 0%, #F2B406 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 15px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4); }
        .submit-btn:active { transform: translateY(0); }
        .loading { text-align: center; color: #F2B406; font-weight: 600; margin-top: 15px; display: none; }
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #F2B406;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .result { margin-top: 20px; padding: 20px; border-radius: 8px; display: none; }
        .score-display {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }
        .key-points { margin: 20px 0; }
        .key-points h3 { font-size: 16px; margin-bottom: 12px; color: #333; }
        .point {
            padding: 10px;
            margin: 8px 0;
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .point.hit { background: #d4edda; border-left: 4px solid #28a745; }
        .point.miss { background: #f8d7da; border-left: 4px solid #dc3545; }
        .comment-section, .hint-section { margin-top: 20px; padding: 15px; border-radius: 6px; }
        .comment-section { background: #e3f2fd; border-left: 4px solid #2196f3; }
        .hint-section { background: #fff3cd; border-left: 4px solid #ffc107; }
        .comment-section h3, .hint-section h3 {
            font-size: 14px;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 2px solid #e0e0e0;
            font-size: 13px;
            color: #666;
        }
        
        /* Progress Bar Styles */
        .progress-bar-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 55px;
            background: white;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
            align-items: center;
            padding: 0 20px;
            gap: 15px;
        }
        .progress-wrapper {
            flex: 1;
            position: relative;
            height: 28px;
            background: #e0e0e0;
            border-radius: 14px;
            overflow: visible;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff8c00 0%, #ffa500 100%);
            border-radius: 14px;
            transition: width 0.5s ease;
            position: relative;
        }
        .progress-checkmarks {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            pointer-events: none;
        }
        .checkpoint {
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 18px;
            height: 18px;
            border-radius: 50%;
            border: 2px solid #666;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            transition: all 0.3s;
            font-family: 'Gotham', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            pointer-events: all;
            cursor: help;
        }
        .checkpoint.achieved {
            background: #10b981;
            border-color: #10b981;
            color: white;
            font-weight: bold;
        }
        .checkpoint:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            font-weight: 600;
            z-index: 10;
            pointer-events: none;
        }
        .checkpoint:hover::before {
            content: '';
            position: absolute;
            bottom: 24px;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: #333;
            z-index: 10;
        }
        .you-marker {
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            transition: left 0.5s ease;
            z-index: 5;
        }
        .you-dot {
            width: 14px;
            height: 14px;
            background: #ff8c00;
            border: 3px solid white;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(255, 140, 0, 0.6);
        }
        .you-label {
            position: absolute;
            top: -28px;
            left: 50%;
            transform: translateX(-50%);
            background: #ff8c00;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 700;
            font-family: 'Gotham', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            white-space: nowrap;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
        .progress-text {
            font-family: 'Gotham', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-weight: 700;
            color: #004587;
            font-size: 15px;
            white-space: nowrap;
            min-width: 300px;
        }
        .progress-text .points-display {
            font-size: 18px;
            color: #F2B406;
            font-weight: 800;
        }
        @media (max-width: 768px) {
            .progress-text { font-size: 13px; min-width: 220px; }
            .progress-text .points-display { font-size: 16px; }
            .you-label { font-size: 10px; padding: 2px 6px; top: -26px; }
        }
        .milestone-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            z-index: 2000;
            text-align: center;
            transition: transform 0.3s;
        }
        .milestone-popup.show {
            transform: translate(-50%, -50%) scale(1);
        }
        .milestone-popup .emoji {
            font-size: 48px;
            margin-bottom: 15px;
        }
        .milestone-popup .title {
            font-size: 24px;
            font-weight: bold;
            color: #F2B406;
            margin-bottom: 10px;
            font-family: 'Gotham', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ IB SEHS Exam Practice</h1>
            <p>Exam questions with instant(ish) AI marking & feedback</p>
        </div>

        <div class="ai-disclaimer">
            <strong>‚ö†Ô∏è AI Marking Disclaimer</strong>
            Watch out! This marking is done by AI. It's usually pretty good, but just like your teacher, it is occasionally clueless! Think you should have been given more marks? Perfect! That's critical thinking at work. Bring your disagreement to your teacher and classmates for some proper academic debate. The official IB mark schemes are still the final word.
        </div>

        <div class="controls">
            <div class="level-toggle">
                <button class="level-btn active" data-level="SL" onclick="setLevel('SL')">Standard Level (SL)</button>
                <button class="level-btn" data-level="HL" onclick="setLevel('HL')">Higher Level (HL)</button>
            </div>

            <div class="filter-grid">
                <div class="filter-section">
                    <label for="sectionFilter">Section:</label>
                    <select id="sectionFilter" onchange="updateTopics()">
                        <option value="">All Sections</option>
                    </select>
                </div>

                <div class="filter-section">
                    <label for="topicFilter">Topic:</label>
                    <select id="topicFilter" onchange="updateSubtopics()">
                        <option value="">All Topics</option>
                    </select>
                </div>

                <div class="filter-section">
                    <label for="subtopicFilter">Subtopic:</label>
                    <select id="subtopicFilter" onchange="filterQuestions()">
                        <option value="">All Subtopics</option>
                    </select>
                </div>
            </div>

            <div class="stats" id="stats"></div>

            <div class="question-nav">
                <button class="nav-btn" id="prevBtn" onclick="navigateQuestion(-1)">‚Üê Previous</button>
                <button class="random-btn" onclick="loadRandomQuestion()">üé≤ Random</button>
                <span class="question-counter" id="questionCounter">Question 1 of 1</span>
                <button class="nav-btn" id="nextBtn" onclick="navigateQuestion(1)">Next ‚Üí</button>
            </div>
        </div>

        <div class="card">
            <div id="questionDisplay"></div>
            <textarea id="answerInput" placeholder="Type your answer here..."></textarea>
            <button class="submit-btn" onclick="submitAnswer()">Submit Answer</button>
            <div class="loading" id="loading">
                <div class="spinner"></div>
                Marking your answer...
            </div>
            <div class="result" id="result"></div>
        </div>
    </div>

    <!-- Progress Bar -->
    <div class="progress-bar-container">
        <div class="progress-wrapper">
            <div class="progress-fill" id="progressFill"></div>
            <div class="progress-checkmarks">
                <div class="checkpoint" style="left: 5%;" data-points="5" data-tooltip="5 pts: No longer clueless ü§∑‚Äç‚ôÇÔ∏è"></div>
                <div class="checkpoint" style="left: 10%;" data-points="10" data-tooltip="10 pts: Getting the vibe üéØ"></div>
                <div class="checkpoint" style="left: 20%;" data-points="20" data-tooltip="20 pts: On a streak üî•"></div>
                <div class="checkpoint" style="left: 35%;" data-points="35" data-tooltip="35 pts: Built different üí™"></div>
                <div class="checkpoint" style="left: 50%;" data-points="50" data-tooltip="50 pts: Actually goated üêê"></div>
                <div class="checkpoint" style="left: 75%;" data-points="75" data-tooltip="75 pts: Certified legend üëë"></div>
                <div class="checkpoint" style="left: 100%;" data-points="100" data-tooltip="100 pts: Final boss down ‚öîÔ∏è"></div>
            </div>
            <div class="you-marker" id="youMarker">
                <div class="you-dot"></div>
                <div class="you-label">You</div>
            </div>
        </div>
        <div class="progress-text" id="progressText"><span class="points-display">0</span>/100 pts ¬∑ Next: No longer clueless ü§∑‚Äç‚ôÇÔ∏è (5 away)</div>
    </div>

    <!-- Milestone Popup -->
    <div class="milestone-popup" id="milestonePopup">
        <div class="emoji" id="milestoneEmoji"></div>
        <div class="title" id="milestoneTitle"></div>
    </div>

    <script>
        const curriculum = {
  "A": {
    "name": "Exercise physiology and nutrition",
    "topics": {
      "A.1": {
        "name": "Communication",
        "subtopics": {
          "A.1.1": {
            "name": "Inter-system communication",
            "sl_hours": 10,
            "hl_hours": 0
          },
          "A.1.2": {
            "name": "Maintaining homeostasis",
            "sl_hours": 6,
            "hl_hours": 5
          },
          "A.1.3": {
            "name": "Transport",
            "sl_hours": 7,
            "hl_hours": 0
          }
        }
      },
      "A.2": {
        "name": "Hydration and nutrition",
        "subtopics": {
          "A.2.1": {
            "name": "Water and electrolyte balance",
            "sl_hours": 3,
            "hl_hours": 0
          },
          "A.2.2": {
            "name": "Fuelling for health and performance",
            "sl_hours": 6,
            "hl_hours": 4
          },
          "A.2.3": {
            "name": "Energy systems",
            "sl_hours": 7,
            "hl_hours": 2
          }
        }
      },
      "A.3": {
        "name": "Response",
        "subtopics": {
          "A.3.1": {
            "name": "Qualities of training",
            "sl_hours": 6,
            "hl_hours": 0
          },
          "A.3.2": {
            "name": "Benefits to health of being active",
            "sl_hours": 2,
            "hl_hours": 2
          },
          "A.3.3": {
            "name": "Fatigue and recovery",
            "sl_hours": 9,
            "hl_hours": 0
          }
        }
      }
    }
  },
  "B": {
    "name": "Biomechanics",
    "topics": {
      "B.1": {
        "name": "Generating movement in the body",
        "subtopics": {
          "B.1.1": {
            "name": "Anatomical position, planes and movement",
            "sl_hours": 3,
            "hl_hours": 3
          },
          "B.1.2": {
            "name": "Structure and function of connective tissues and joints",
            "sl_hours": 3,
            "hl_hours": 0
          },
          "B.1.3": {
            "name": "Muscular function",
            "sl_hours": 4,
            "hl_hours": 2
          },
          "B.1.4": {
            "name": "Levers in movement and sport",
            "sl_hours": 2,
            "hl_hours": 0
          }
        }
      },
      "B.2": {
        "name": "Forces, motion and movement",
        "subtopics": {
          "B.2.1": {
            "name": "Newton's laws of motion",
            "sl_hours": 5,
            "hl_hours": 12
          },
          "B.2.2": {
            "name": "Fluid mechanics",
            "sl_hours": 3,
            "hl_hours": 8
          },
          "B.2.3": {
            "name": "Movement analysis and its applications",
            "sl_hours": 3,
            "hl_hours": 0
          }
        }
      },
      "B.3": {
        "name": "Injury",
        "subtopics": {
          "B.3.1": {
            "name": "Causes of injury",
            "sl_hours": 3,
            "hl_hours": 2
          },
          "B.3.2": {
            "name": "Interventions related to injury",
            "sl_hours": 4,
            "hl_hours": 0
          }
        }
      }
    }
  },
  "C": {
    "name": "Sports psychology and motor learning",
    "topics": {
      "C.1": {
        "name": "Individual differences",
        "subtopics": {
          "C.1.1": {
            "name": "Personality",
            "sl_hours": 2,
            "hl_hours": 2
          },
          "C.1.2": {
            "name": "Mental toughness",
            "sl_hours": 2,
            "hl_hours": 4
          }
        }
      },
      "C.2": {
        "name": "Motor learning",
        "subtopics": {
          "C.2.1": {
            "name": "Motor learning processes",
            "sl_hours": 10,
            "hl_hours": 0
          },
          "C.2.2": {
            "name": "Attentional control",
            "sl_hours": 2,
            "hl_hours": 0
          }
        }
      },
      "C.3": {
        "name": "Motivation",
        "subtopics": {
          "C.3.1": {
            "name": "Achievement motivation",
            "sl_hours": 3,
            "hl_hours": 2
          },
          "C.3.2": {
            "name": "Self-determination",
            "sl_hours": 3,
            "hl_hours": 6
          },
          "C.3.3": {
            "name": "Motivational climate",
            "sl_hours": 2,
            "hl_hours": 0
          }
        }
      },
      "C.4": {
        "name": "Stress and coping",
        "subtopics": {
          "C.4.1": {
            "name": "Arousal and anxiety",
            "sl_hours": 3,
            "hl_hours": 0
          },
          "C.4.2": {
            "name": "Coping",
            "sl_hours": 2,
            "hl_hours": 2
          }
        }
      },
      "C.5": {
        "name": "Psychological skills",
        "subtopics": {
          "C.5.1": {
            "name": "Goal setting",
            "sl_hours": 4,
            "hl_hours": 2
          },
          "C.5.2": {
            "name": "Imagery",
            "sl_hours": 0,
            "hl_hours": 3
          }
        }
      }
    }
  }
};

        const allQuestions = [
  {
    "id": "Q001",
    "subtopic": "A.1.1",
    "section": "A",
    "topic": "A.1",
    "question": "Explain the mechanism of expiration (exhalation) when exercising.",
    "maxMarks": 5,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q002",
    "subtopic": "A.1.1",
    "section": "A",
    "topic": "A.1",
    "question": "Describe the process of gaseous exchange at the alveoli during rest and exercise.",
    "maxMarks": 6,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q003",
    "subtopic": "A.1.1",
    "section": "A",
    "topic": "A.1",
    "question": "Compare and contrast the process of gaseous exchange of oxygen and carbon dioxide at the alveoli during exercise.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q004",
    "subtopic": "A.1.1",
    "section": "A",
    "topic": "A.1",
    "question": "Explain how the short-term stress caused by competing in sport influences how the nervous system regulates adrenaline.",
    "maxMarks": 2,
    "level": "HL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q005",
    "subtopic": "A.1.1",
    "section": "A",
    "topic": "A.1",
    "question": "Describe blood redistribution as a soccer player begins running during a game.",
    "maxMarks": 5,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q006",
    "subtopic": "A.1.1",
    "section": "A",
    "topic": "A.1",
    "question": "Describe the cardiovascular and respiratory responses to exercise.",
    "maxMarks": 5,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q007",
    "subtopic": "A.1.1",
    "section": "A",
    "topic": "A.1",
    "question": "Explain the role of chemoreceptors in regulating ventilation during exercise.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q008",
    "subtopic": "A.1.2",
    "section": "A",
    "topic": "A.1",
    "question": "Explain the role of insulin on glucose uptake at rest.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q009",
    "subtopic": "A.1.2",
    "section": "A",
    "topic": "A.1",
    "question": "Explain the role of insulin in the formation of glycogen.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q010",
    "subtopic": "A.1.2",
    "section": "A",
    "topic": "A.1",
    "question": "Discuss the regulation of electrolyte balance during endurance swimming.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q011",
    "subtopic": "A.1.2",
    "section": "A",
    "topic": "A.1",
    "question": "Outline two reasons why hydration is important for an endurance swimmer.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q012",
    "subtopic": "A.1.2",
    "section": "A",
    "topic": "A.1",
    "question": "Predict the effect of static exercise on systolic and diastolic blood pressure.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q013",
    "subtopic": "A.1.3",
    "section": "A",
    "topic": "A.1",
    "question": "Describe blood redistribution as a player begins running during a game.",
    "maxMarks": 5,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q014",
    "subtopic": "A.1.3",
    "section": "A",
    "topic": "A.1",
    "question": "Explain the vascular shunt mechanism during exercise.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q015",
    "subtopic": "A.1.3",
    "section": "A",
    "topic": "A.1",
    "question": "Outline the cardiovascular responses during a marathon.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q016",
    "subtopic": "A.1.3",
    "section": "A",
    "topic": "A.1",
    "question": "Describe stroke volume and cardiac output changes during exercise.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q017",
    "subtopic": "A.1.3",
    "section": "A",
    "topic": "A.1",
    "question": "Explain venous return mechanisms during physical activity.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q018",
    "subtopic": "A.2.1",
    "section": "A",
    "topic": "A.2",
    "question": "Discuss the regulation of electrolyte balance during a 20km swim.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q019",
    "subtopic": "A.2.1",
    "section": "A",
    "topic": "A.2",
    "question": "Outline two reasons why hydration is important for an endurance swimmer.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q020",
    "subtopic": "A.2.1",
    "section": "A",
    "topic": "A.2",
    "question": "Explain the role of ADH and aldosterone in maintaining fluid balance.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q021",
    "subtopic": "A.2.2",
    "section": "A",
    "topic": "A.2",
    "question": "Discuss the recommended macronutrients required for marathon running.",
    "maxMarks": 5,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q022",
    "subtopic": "A.2.2",
    "section": "A",
    "topic": "A.2",
    "question": "Explain the importance of selecting low glycemic index carbohydrates for a pre-competition meal.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q023",
    "subtopic": "A.2.2",
    "section": "A",
    "topic": "A.2",
    "question": "Outline the nutritional requirements for a marathon runner.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q024",
    "subtopic": "A.2.2",
    "section": "A",
    "topic": "A.2",
    "question": "Explain the benefits of carbohydrate loading for endurance athletes.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q025",
    "subtopic": "A.2.2",
    "section": "A",
    "topic": "A.2",
    "question": "Describe the role of protein in muscle recovery and adaptation.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q026",
    "subtopic": "A.2.3",
    "section": "A",
    "topic": "A.2",
    "question": "Describe the re-synthesis of ATP by the ATP-CP system.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q027",
    "subtopic": "A.2.3",
    "section": "A",
    "topic": "A.2",
    "question": "Discuss the factors that determine the dominant energy system.",
    "maxMarks": 5,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q028",
    "subtopic": "A.2.3",
    "section": "A",
    "topic": "A.2",
    "question": "Explain the lactic acid system and its role in high-intensity exercise.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q029",
    "subtopic": "A.2.3",
    "section": "A",
    "topic": "A.2",
    "question": "Discuss how adenosine can gain and lose a phosphate molecule.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q030",
    "subtopic": "A.2.3",
    "section": "A",
    "topic": "A.2",
    "question": "Describe the aerobic energy system and its fuel sources.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q031",
    "subtopic": "A.2.3",
    "section": "A",
    "topic": "A.2",
    "question": "Explain the energy systems used during a 400m sprint.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q032",
    "subtopic": "A.3.1",
    "section": "A",
    "topic": "A.3",
    "question": "Explain how a coach uses key principles of training to maximize athletic development.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q033",
    "subtopic": "A.3.1",
    "section": "A",
    "topic": "A.3",
    "question": "Outline the principles of overload and specificity in training.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q034",
    "subtopic": "A.3.1",
    "section": "A",
    "topic": "A.3",
    "question": "Describe how periodization is used to optimize performance.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q035",
    "subtopic": "A.3.1",
    "section": "A",
    "topic": "A.3",
    "question": "Explain the principle of reversibility in athletic training.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q036",
    "subtopic": "A.3.2",
    "section": "A",
    "topic": "A.3",
    "question": "Outline the health benefits of regular physical activity.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q037",
    "subtopic": "A.3.2",
    "section": "A",
    "topic": "A.3",
    "question": "Explain the cardiovascular benefits of aerobic training.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q038",
    "subtopic": "A.3.3",
    "section": "A",
    "topic": "A.3",
    "question": "Describe the causes of fatigue during high-intensity exercise.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q039",
    "subtopic": "A.3.3",
    "section": "A",
    "topic": "A.3",
    "question": "Explain recovery strategies used by athletes.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q040",
    "subtopic": "A.3.3",
    "section": "A",
    "topic": "A.3",
    "question": "Outline the role of lactate in muscle fatigue.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q041",
    "subtopic": "A.3.3",
    "section": "A",
    "topic": "A.3",
    "question": "Describe EPOC and its role in recovery.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q042",
    "subtopic": "A.3.3",
    "section": "A",
    "topic": "A.3",
    "question": "Explain the importance of recovery time between training sessions.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q043",
    "subtopic": "A.3.3",
    "section": "A",
    "topic": "A.3",
    "question": "Outline active vs passive recovery strategies.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q044",
    "subtopic": "B.1.1",
    "section": "B",
    "topic": "B.1",
    "question": "State the location of the humerus in relation to the radius using anatomical terminology.",
    "maxMarks": 1,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q045",
    "subtopic": "B.1.1",
    "section": "B",
    "topic": "B.1",
    "question": "Describe the sagittal, frontal and transverse planes of movement.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q046",
    "subtopic": "B.1.1",
    "section": "B",
    "topic": "B.1",
    "question": "Outline flexion, extension, abduction and adduction movements.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q047",
    "subtopic": "B.1.2",
    "section": "B",
    "topic": "B.1",
    "question": "Outline four features of a synovial joint.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q048",
    "subtopic": "B.1.2",
    "section": "B",
    "topic": "B.1",
    "question": "Describe the structure and function of ligaments and tendons.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q049",
    "subtopic": "B.1.2",
    "section": "B",
    "topic": "B.1",
    "question": "Explain the role of synovial fluid in joint movement.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q050",
    "subtopic": "B.1.3",
    "section": "B",
    "topic": "B.1",
    "question": "Discuss characteristics of a type IIX fast glycolytic muscle fibre.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q051",
    "subtopic": "B.1.3",
    "section": "B",
    "topic": "B.1",
    "question": "Explain how muscles work in pairs (agonist and antagonist) during movement.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q052",
    "subtopic": "B.1.3",
    "section": "B",
    "topic": "B.1",
    "question": "Compare type I and type II muscle fibres.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q053",
    "subtopic": "B.1.3",
    "section": "B",
    "topic": "B.1",
    "question": "Describe concentric, eccentric and isometric contractions.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q054",
    "subtopic": "B.1.4",
    "section": "B",
    "topic": "B.1",
    "question": "Distinguish between first class levers and third class levers.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q055",
    "subtopic": "B.1.4",
    "section": "B",
    "topic": "B.1",
    "question": "Explain the lever system during a bicep curl with examples.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q056",
    "subtopic": "B.2.1",
    "section": "B",
    "topic": "B.2",
    "question": "Using examples, outline Newton's three laws of motion during a soccer match.",
    "maxMarks": 6,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q057",
    "subtopic": "B.2.1",
    "section": "B",
    "topic": "B.2",
    "question": "Predict how changing speed and height of release affects projectile motion at 45 degrees.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q058",
    "subtopic": "B.2.1",
    "section": "B",
    "topic": "B.2",
    "question": "Explain the concept of momentum in sport with examples.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q059",
    "subtopic": "B.2.1",
    "section": "B",
    "topic": "B.2",
    "question": "Describe impulse and its application in sport.",
    "maxMarks": 3,
    "level": "HL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q060",
    "subtopic": "B.2.1",
    "section": "B",
    "topic": "B.2",
    "question": "Explain Newton's second law (F=ma) with sporting examples.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q061",
    "subtopic": "B.2.1",
    "section": "B",
    "topic": "B.2",
    "question": "Describe the relationship between force, mass and acceleration in athletics.",
    "maxMarks": 3,
    "level": "HL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q062",
    "subtopic": "B.2.1",
    "section": "B",
    "topic": "B.2",
    "question": "Explain action-reaction pairs in sport using Newton's third law.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q063",
    "subtopic": "B.2.2",
    "section": "B",
    "topic": "B.2",
    "question": "Explain the concept of angular momentum when a ballet dancer performs a pirouette.",
    "maxMarks": 6,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q064",
    "subtopic": "B.2.2",
    "section": "B",
    "topic": "B.2",
    "question": "Discuss three factors that influence the amount of drag on a 100m sprinter.",
    "maxMarks": 3,
    "level": "HL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q065",
    "subtopic": "B.2.2",
    "section": "B",
    "topic": "B.2",
    "question": "Describe how friction influences a sprinter's performance.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q066",
    "subtopic": "B.2.2",
    "section": "B",
    "topic": "B.2",
    "question": "Explain Bernoulli's principle and its application in sport.",
    "maxMarks": 4,
    "level": "HL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q067",
    "subtopic": "B.2.2",
    "section": "B",
    "topic": "B.2",
    "question": "Describe lift and drag forces in swimming.",
    "maxMarks": 3,
    "level": "HL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q068",
    "subtopic": "B.2.3",
    "section": "B",
    "topic": "B.2",
    "question": "Describe the forces acting on a sprinter during acceleration.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q069",
    "subtopic": "B.2.3",
    "section": "B",
    "topic": "B.2",
    "question": "Analyze movement patterns during a vertical jump.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q070",
    "subtopic": "B.2.3",
    "section": "B",
    "topic": "B.2",
    "question": "Outline the phases of a sprint start.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q071",
    "subtopic": "B.3.1",
    "section": "B",
    "topic": "B.3",
    "question": "Outline common soft-tissue injuries in soccer players.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q072",
    "subtopic": "B.3.1",
    "section": "B",
    "topic": "B.3",
    "question": "Explain the difference between acute and chronic injuries.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q073",
    "subtopic": "B.3.1",
    "section": "B",
    "topic": "B.3",
    "question": "Describe causes of overuse injuries in runners.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q074",
    "subtopic": "B.3.2",
    "section": "B",
    "topic": "B.3",
    "question": "Explain injury prevention strategies that could be used by a swimming coach.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q075",
    "subtopic": "B.3.2",
    "section": "B",
    "topic": "B.3",
    "question": "Describe the RICE protocol for acute injuries.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q076",
    "subtopic": "B.3.2",
    "section": "B",
    "topic": "B.3",
    "question": "Outline rehabilitation strategies for a sprained ankle.",
    "maxMarks": 4,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q077",
    "subtopic": "B.3.2",
    "section": "B",
    "topic": "B.3",
    "question": "Explain the role of physiotherapy in injury recovery.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q078",
    "subtopic": "C.1.1",
    "section": "C",
    "topic": "C.1",
    "question": "Explain how personality traits influence sports performance.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q079",
    "subtopic": "C.1.1",
    "section": "C",
    "topic": "C.1",
    "question": "Outline the trait and interactionist approaches to personality.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q080",
    "subtopic": "C.1.2",
    "section": "C",
    "topic": "C.1",
    "question": "Describe characteristics of mental toughness in athletes.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q081",
    "subtopic": "C.1.2",
    "section": "C",
    "topic": "C.1",
    "question": "Explain how mental toughness can be developed.",
    "maxMarks": 3,
    "level": "HL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q082",
    "subtopic": "C.1.2",
    "section": "C",
    "topic": "C.1",
    "question": "Outline the 4Cs model of mental toughness.",
    "maxMarks": 2,
    "level": "HL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q083",
    "subtopic": "C.2.1",
    "section": "C",
    "topic": "C.2",
    "question": "Define the concept of transfer in motor learning.",
    "maxMarks": 1,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q084",
    "subtopic": "C.2.1",
    "section": "C",
    "topic": "C.2",
    "question": "Outline abilities to skills as a type of transfer when learning a tennis serve.",
    "maxMarks": 1,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q085",
    "subtopic": "C.2.1",
    "section": "C",
    "topic": "C.2",
    "question": "Using examples, outline positive and negative transfer.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q086",
    "subtopic": "C.2.1",
    "section": "C",
    "topic": "C.2",
    "question": "Describe the stages of learning (Fitts and Posner model).",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q087",
    "subtopic": "C.2.1",
    "section": "C",
    "topic": "C.2",
    "question": "Explain the difference between massed and distributed practice.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q088",
    "subtopic": "C.2.1",
    "section": "C",
    "topic": "C.2",
    "question": "Describe methods for improving memory in skill acquisition.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q089",
    "subtopic": "C.2.1",
    "section": "C",
    "topic": "C.2",
    "question": "Explain whole, part and whole-part-whole practice methods.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q090",
    "subtopic": "C.2.2",
    "section": "C",
    "topic": "C.2",
    "question": "Explain selective attention in sport.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q091",
    "subtopic": "C.2.2",
    "section": "C",
    "topic": "C.2",
    "question": "Describe strategies to improve attentional focus during performance.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q092",
    "subtopic": "C.3.1",
    "section": "C",
    "topic": "C.3",
    "question": "Describe how Atkinson's model of achievement motivation influences response to coaching.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q093",
    "subtopic": "C.3.1",
    "section": "C",
    "topic": "C.3",
    "question": "Explain NACH (need to achieve) and NAF (need to avoid failure) in achievement motivation.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q094",
    "subtopic": "C.3.1",
    "section": "C",
    "topic": "C.3",
    "question": "Outline goal orientation theory in sport.",
    "maxMarks": 3,
    "level": "HL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q095",
    "subtopic": "C.3.2",
    "section": "C",
    "topic": "C.3",
    "question": "Explain the three basic needs in self-determination theory.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q096",
    "subtopic": "C.3.2",
    "section": "C",
    "topic": "C.3",
    "question": "Distinguish between intrinsic and extrinsic motivation.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q097",
    "subtopic": "C.3.2",
    "section": "C",
    "topic": "C.3",
    "question": "Describe autonomy, competence and relatedness in sport contexts.",
    "maxMarks": 3,
    "level": "HL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q098",
    "subtopic": "C.3.2",
    "section": "C",
    "topic": "C.3",
    "question": "Explain how coaches can enhance autonomy in athletes.",
    "maxMarks": 3,
    "level": "HL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q099",
    "subtopic": "C.3.2",
    "section": "C",
    "topic": "C.3",
    "question": "Outline the continuum of self-determination from amotivation to intrinsic motivation.",
    "maxMarks": 4,
    "level": "HL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q100",
    "subtopic": "C.3.3",
    "section": "C",
    "topic": "C.3",
    "question": "Distinguish between task-involving and ego-involving climates.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q101",
    "subtopic": "C.3.3",
    "section": "C",
    "topic": "C.3",
    "question": "Explain how coaches create a mastery motivational climate.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q102",
    "subtopic": "C.4.1",
    "section": "C",
    "topic": "C.4",
    "question": "Distinguish between cognitive and somatic anxiety.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q103",
    "subtopic": "C.4.1",
    "section": "C",
    "topic": "C.4",
    "question": "Explain the inverted-U hypothesis of arousal and performance.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q104",
    "subtopic": "C.4.1",
    "section": "C",
    "topic": "C.4",
    "question": "Describe catastrophe theory in sport psychology.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q105",
    "subtopic": "C.4.2",
    "section": "C",
    "topic": "C.4",
    "question": "Outline relaxation techniques to reduce somatic anxiety.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q106",
    "subtopic": "C.4.2",
    "section": "C",
    "topic": "C.4",
    "question": "Distinguish between problem-focused and emotion-focused coping strategies.",
    "maxMarks": 2,
    "level": "HL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q107",
    "subtopic": "C.5.1",
    "section": "C",
    "topic": "C.5",
    "question": "Explain the SMART criteria for goal setting.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q108",
    "subtopic": "C.5.1",
    "section": "C",
    "topic": "C.5",
    "question": "Distinguish between outcome, performance and process goals.",
    "maxMarks": 3,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q109",
    "subtopic": "C.5.1",
    "section": "C",
    "topic": "C.5",
    "question": "Describe the benefits of goal setting for athletes.",
    "maxMarks": 2,
    "level": "SL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q110",
    "subtopic": "C.5.1",
    "section": "C",
    "topic": "C.5",
    "question": "Outline strategies for effective goal setting in team sports.",
    "maxMarks": 3,
    "level": "HL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q111",
    "subtopic": "C.5.2",
    "section": "C",
    "topic": "C.5",
    "question": "Explain the PETTLEP model of imagery.",
    "maxMarks": 3,
    "level": "HL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q112",
    "subtopic": "C.5.2",
    "section": "C",
    "topic": "C.5",
    "question": "Describe internal vs external imagery perspectives.",
    "maxMarks": 2,
    "level": "HL",
    "markScheme": "IB mark scheme"
  },
  {
    "id": "Q113",
    "subtopic": "C.5.2",
    "section": "C",
    "topic": "C.5",
    "question": "Outline the benefits of imagery for skill acquisition and performance.",
    "maxMarks": 3,
    "level": "HL",
    "markScheme": "IB mark scheme"
  }
];

        // Gamification variables
        let sessionPoints = 0;
        const milestones = [
            { points: 5, name: "No longer clueless", emoji: "ü§∑‚Äç‚ôÇÔ∏è" },
            { points: 10, name: "Getting the vibe", emoji: "üéØ" },
            { points: 20, name: "On a streak", emoji: "üî•" },
            { points: 35, name: "Built different", emoji: "üí™" },
            { points: 50, name: "Actually goated", emoji: "üêê" },
            { points: 75, name: "Certified legend", emoji: "üëë" },
            { points: 100, name: "Final boss down", emoji: "‚öîÔ∏è" }
        ];

        let currentLevel = 'SL';
        let filteredQuestions = [];
        let currentIndex = 0;

        function init() {
            populateSections();
            filterQuestions();
            displayQuestion();
            updateNavigation();
            updateProgressBar();
        }

        function populateSections() {
            const select = document.getElementById('sectionFilter');
            ['A', 'B', 'C'].forEach(sec => {
                const option = document.createElement('option');
                option.value = sec;
                option.textContent = `${sec}. ${curriculum[sec].name}`;
                select.appendChild(option);
            });
        }

        function updateTopics() {
            const section = document.getElementById('sectionFilter').value;
            const topicSelect = document.getElementById('topicFilter');
            const subtopicSelect = document.getElementById('subtopicFilter');

            topicSelect.innerHTML = '<option value="">All Topics</option>';
            subtopicSelect.innerHTML = '<option value="">All Subtopics</option>';

            if (section && curriculum[section]) {
                Object.keys(curriculum[section].topics).forEach(topicCode => {
                    const topic = curriculum[section].topics[topicCode];
                    const option = document.createElement('option');
                    option.value = topicCode;
                    option.textContent = `${topicCode} ${topic.name}`;
                    topicSelect.appendChild(option);
                });
            }

            filterQuestions();
        }

        function updateSubtopics() {
            const section = document.getElementById('sectionFilter').value;
            const topic = document.getElementById('topicFilter').value;
            const subtopicSelect = document.getElementById('subtopicFilter');

            subtopicSelect.innerHTML = '<option value="">All Subtopics</option>';

            if (section && topic && curriculum[section]?.topics[topic]) {
                Object.keys(curriculum[section].topics[topic].subtopics).forEach(subtopicCode => {
                    const subtopic = curriculum[section].topics[topic].subtopics[subtopicCode];
                    const hours = currentLevel === 'SL' ? subtopic.sl_hours : subtopic.hl_hours;

                    if (hours > 0) {
                        const option = document.createElement('option');
                        option.value = subtopicCode;
                        option.textContent = `${subtopicCode} ${subtopic.name} (${hours}h)`;
                        subtopicSelect.appendChild(option);
                    }
                });
            }

            filterQuestions();
        }

        function setLevel(level) {
            currentLevel = level;
            document.querySelectorAll('.level-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.level === level);
            });
            updateSubtopics();
            filterQuestions();
        }

        function filterQuestions() {
            const section = document.getElementById('sectionFilter').value;
            const topic = document.getElementById('topicFilter').value;
            const subtopic = document.getElementById('subtopicFilter').value;

            filteredQuestions = allQuestions.filter(q => {
                if (currentLevel === 'SL' && q.level === 'HL') return false;

                const subtopicCode = q.subtopic || '';
                if (subtopicCode) {
                    const sec = subtopicCode.charAt(0);
                    const parts = subtopicCode.split('.');
                    const topicCode = parts.length >= 2 ? parts[0] + '.' + parts[1] : '';

                    if (curriculum[sec]?.topics[topicCode]?.subtopics[subtopicCode]) {
                        const subData = curriculum[sec].topics[topicCode].subtopics[subtopicCode];
                        const hours = currentLevel === 'SL' ? subData.sl_hours : subData.hl_hours;
                        if (hours === 0) return false;
                    }
                }

                if (section && q.section !== section) return false;
                if (topic && q.topic !== topic) return false;
                if (subtopic && q.subtopic !== subtopic) return false;

                return true;
            });

            currentIndex = 0;
            updateStats();
            displayQuestion();
            updateNavigation();
        }

        function loadRandomQuestion() {
            if (filteredQuestions.length === 0) return;
            currentIndex = Math.floor(Math.random() * filteredQuestions.length);
            displayQuestion();
            updateNavigation();
        }

        function updateStats() {
            const statsDiv = document.getElementById('stats');
            const subtopic = document.getElementById('subtopicFilter').value;

            let info = '';
            if (subtopic && curriculum) {
                const sec = subtopic.charAt(0);
                const parts = subtopic.split('.');
                const topicCode = parts.length >= 2 ? parts[0] + '.' + parts[1] : '';

                if (curriculum[sec]?.topics[topicCode]?.subtopics[subtopic]) {
                    const sub = curriculum[sec].topics[topicCode].subtopics[subtopic];
                    const hours = currentLevel === 'SL' ? sub.sl_hours : sub.hl_hours;
                    info = `<div>Teaching hours: ${hours}</div><div>Questions available: ${filteredQuestions.length}</div>`;
                }
            } else {
                info = `<div>Level: ${currentLevel}</div><div>Questions available: ${filteredQuestions.length}</div>`;
            }

            statsDiv.innerHTML = info;
        }

        function displayQuestion() {
            if (filteredQuestions.length === 0) {
                document.getElementById('questionDisplay').innerHTML = '<p style="color: #666;">No questions available for this selection.</p>';
                document.getElementById('answerInput').style.display = 'none';
                document.querySelector('.submit-btn').style.display = 'none';
                return;
            }

            document.getElementById('answerInput').style.display = 'block';
            document.querySelector('.submit-btn').style.display = 'block';

            const q = filteredQuestions[currentIndex];
            let subtopicName = '';

            if (q.subtopic) {
                const sec = q.subtopic.charAt(0);
                const parts = q.subtopic.split('.');
                const topicCode = parts.length >= 2 ? parts[0] + '.' + parts[1] : '';

                if (curriculum[sec]?.topics[topicCode]?.subtopics[q.subtopic]) {
                    subtopicName = curriculum[sec].topics[topicCode].subtopics[q.subtopic].name;
                }
            }

            document.getElementById('questionDisplay').innerHTML = `
                <div>
                    <span class="level-badge badge-${q.level}">${q.level}</span>
                    <span class="subtopic-badge">${q.subtopic} ${subtopicName}</span>
                </div>
                <div class="question-header">
                    <span style="color: #666; font-size: 14px;">${q.id}</span>
                    <span class="marks-badge">[${q.maxMarks} marks]</span>
                </div>
                <div class="question-text">${q.question}</div>
            `;

            document.getElementById('answerInput').value = '';
            document.getElementById('result').style.display = 'none';
        }

        function navigateQuestion(direction) {
            currentIndex += direction;
            displayQuestion();
            updateNavigation();
        }

        function updateNavigation() {
            document.getElementById('prevBtn').disabled = (currentIndex === 0);
            document.getElementById('nextBtn').disabled = (currentIndex === filteredQuestions.length - 1);
            document.getElementById('questionCounter').textContent = `Question ${currentIndex + 1} of ${filteredQuestions.length}`;
        }

        async function submitAnswer() {
            const answer = document.getElementById('answerInput').value.trim();
            if (!answer) {
                alert('Please enter an answer before submitting.');
                return;
            }

            const q = filteredQuestions[currentIndex];
            document.getElementById('loading').style.display = 'block';
            document.getElementById('result').style.display = 'none';

            try {
                const response = await fetch('https://sehsexam.thatjamiebloke.workers.dev/mark', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        questionId: q.id,
                        question: q.question,
                        markScheme: q.markScheme,
                        maxMarks: q.maxMarks,
                        answer: answer
                    })
                });

                if (!response.ok) throw new Error('Marking failed');
                const data = await response.json();
                
                // Add points and check for milestone
                const oldPoints = sessionPoints;
                sessionPoints = Math.min(100, sessionPoints + data.score);
                checkMilestone(oldPoints, sessionPoints);
                updateProgressBar();
                
                displayResult(data);
            } catch (error) {
                document.getElementById('result').innerHTML = '<div style="color: #dc3545;">Error: ' + error.message + '</div>';
                document.getElementById('result').style.display = 'block';
            } finally {
                document.getElementById('loading').style.display = 'none';
            }
        }

        function updateProgressBar() {
            const percentage = Math.min(100, sessionPoints);
            document.getElementById('progressFill').style.width = percentage + '%';
            
            // Update "You" marker position
            document.getElementById('youMarker').style.left = percentage + '%';
            
            // Update checkmarks
            document.querySelectorAll('.checkpoint').forEach(checkpoint => {
                const points = parseInt(checkpoint.dataset.points);
                if (sessionPoints >= points) {
                    checkpoint.classList.add('achieved');
                    checkpoint.innerHTML = '‚úì';
                } else {
                    checkpoint.classList.remove('achieved');
                    checkpoint.innerHTML = '';
                }
            });
            
            // Update text with more prominent points display
            const nextMilestone = milestones.find(m => m.points > sessionPoints);
            if (nextMilestone) {
                const remaining = nextMilestone.points - sessionPoints;
                document.getElementById('progressText').innerHTML = 
                    `<span class="points-display">${sessionPoints}</span>/100 pts ¬∑ Next: ${nextMilestone.name} ${nextMilestone.emoji} (${remaining} away)`;
            } else {
                document.getElementById('progressText').innerHTML = 
                    `<span class="points-display">${sessionPoints}</span>/100 pts ¬∑ ${milestones[milestones.length - 1].name} ${milestones[milestones.length - 1].emoji}`;
            }
        }

        function checkMilestone(oldPoints, newPoints) {
            const crossedMilestone = milestones.find(m => oldPoints < m.points && newPoints >= m.points);
            if (crossedMilestone) {
                showMilestonePopup(crossedMilestone);
            }
        }

        function showMilestonePopup(milestone) {
            const popup = document.getElementById('milestonePopup');
            document.getElementById('milestoneEmoji').textContent = milestone.emoji;
            document.getElementById('milestoneTitle').textContent = milestone.name;
            
            popup.classList.add('show');
            setTimeout(() => {
                popup.classList.remove('show');
            }, 2000);
        }

        function displayResult(data) {
            let html = `<div class="score-display">Score: ${data.score} / ${data.maxMarks} ¬∑ Total session: ${sessionPoints}/100</div>`;

            if (data.keyPoints && data.keyPoints.length > 0) {
                html += '<div class="key-points"><h3>Mark Points:</h3>';
                data.keyPoints.forEach(point => {
                    html += `<div class="point ${point.hit ? 'hit' : 'miss'}"><span>${point.hit ? '‚úì' : '‚óã'}</span><span>${point.text}</span></div>`;
                });
                html += '</div>';
            }

            if (data.comment) {
                html += `<div class="comment-section"><h3>Examiner Feedback</h3><p>${data.comment}</p></div>`;
            }

            if (data.hint) {
                html += `<div class="hint-section"><h3>üí° Hint for Improvement</h3><p>${data.hint}</p></div>`;
            }

            document.getElementById('result').innerHTML = html;
            document.getElementById('result').style.display = 'block';
        }

        init();
    </script>
</body>
</html>

